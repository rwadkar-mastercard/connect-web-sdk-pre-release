export const IFRAME_ID="connectIframe";export const STYLES_ID="connectStyles";export const PLATFORM_IFRAME="iframe";export const PLATFORM_POPUP="web";export const CONNECT_SDK_VERSION="PACKAGE_VERSION";export const POPUP_WIDTH=600;export const POPUP_HEIGHT=600;export const CONNECT_POPUP_WIDTH=520;export const CONNECT_POPUP_HEIGHT=720;export const ACK_EVENT="ack";export const CANCEL_EVENT="cancel";export const URL_EVENT="url";export const DONE_EVENT="done";export const ERROR_EVENT="error";export const PING_EVENT="ping";export const WINDOW_EVENT="window";export const ROUTE_EVENT="route";export const USER_EVENT="user";export const CLOSE_POPUP_EVENT="closePopup";
import{IFRAME_ID,POPUP_WIDTH,POPUP_HEIGHT,CONNECT_POPUP_HEIGHT,CONNECT_POPUP_WIDTH,ACK_EVENT,CANCEL_EVENT,URL_EVENT,DONE_EVENT,ERROR_EVENT,PING_EVENT,WINDOW_EVENT,ROUTE_EVENT,USER_EVENT,STYLES_ID,CONNECT_SDK_VERSION,CLOSE_POPUP_EVENT,PLATFORM_POPUP,PLATFORM_IFRAME}from"./constants";let evHandlers,onMessageFn,connectUrl,iframe,metaEl,targetWindow,connectOrigin,popupWindow;const defaultEventHandlers={onLoad:()=>{},onUser:()=>{},onRoute:()=>{}};export const Connect={destroy(){iframe&&iframe.parentNode&&iframe.parentNode.removeChild(iframe),metaEl&&metaEl.parentNode&&metaEl.parentNode.removeChild(metaEl),!iframe&&targetWindow&&targetWindow.close(),iframe=void 0,metaEl=void 0,window.removeEventListener("message",onMessageFn)},launch(a,b){let c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(connectUrl=a,evHandlers={...defaultEventHandlers,...b},connectOrigin=new URL(connectUrl).origin,c.popup){const a={toolbar:"no",location:"no",status:"no",menubar:"no",width:CONNECT_POPUP_HEIGHT,height:CONNECT_POPUP_WIDTH,top:window.self.outerHeight/2+window.self.screenY-CONNECT_POPUP_HEIGHT/2,left:window.self.outerWidth/2+window.self.screenX-CONNECT_POPUP_WIDTH/2},b={...a,...c.popupOptions},d=window.open(connectUrl,"targetWindow","toolbar=".concat(a.toolbar,",location=").concat(a.location,",status=").concat(a.status,",menubar=").concat(a.menubar,",width=").concat(b.width,",height=").concat(b.height,",top=").concat(b.top,",left=").concat(b.left));return d?(targetWindow=d,d.focus(),this.initPostMessage(c),evHandlers.onLoad&&evHandlers.onLoad()):evHandlers.onError({reason:"error",code:1403}),d}else{if(iframe&&iframe.parentNode)throw new Error("You must destroy the iframe before you can open a new one. Call \"destroy()\"");if(!document.getElementById(STYLES_ID)){const a=document.createElement("style");a.id=STYLES_ID,a.type="text/css",a.innerHTML="#".concat(IFRAME_ID," {\n          position: absolute;\n          left: 0;\n          top: 0;\n          width: 100%;\n          height: 100%;\n          z-index: 10;\n          background: rgba(0,0,0,0.8);\n        }"),document.getElementsByTagName("head")[0].appendChild(a)}let a=document.querySelectorAll("meta[name=\"viewport\"]");if(0===a.length&&(metaEl=document.createElement("meta"),metaEl.setAttribute("name","viewport"),metaEl.setAttribute("content","initial-scale=1"),document.head.appendChild(metaEl)),iframe=document.createElement("iframe"),iframe.src=connectUrl,iframe.setAttribute("id",IFRAME_ID),iframe.setAttribute("frameborder","0"),iframe.setAttribute("scrolling","no"),iframe.setAttribute("aria-label","Launching Modal"),iframe.setAttribute("title","Launching Modal"),c.overlay&&iframe.setAttribute("style","background: ".concat(c.overlay,";")),c.node)c.node.appendChild(iframe);else{const a=c.selector?document.querySelector(c.selector):document.body;a?a.appendChild(iframe):(console.warn("Couldn't find any elements matching \"".concat(c.selector,"\", appending \"iframe\" to \"body\" instead.")),document.body.appendChild(iframe))}return iframe.onload=()=>{targetWindow=iframe.contentWindow,this.initPostMessage(c),evHandlers.onLoad&&evHandlers.onLoad()},null}},initPostMessage(a){const b=setInterval(()=>{const b={type:PING_EVENT,selector:a.selector,sdkVersion:CONNECT_SDK_VERSION,platform:"".concat(a.popup?PLATFORM_POPUP:PLATFORM_IFRAME)};a.redirectUrl&&(b.redirectUrl=a.redirectUrl),this.postMessage(b)},1e3);onMessageFn=c=>{const d=c.data.data,e=c.data.type;if(c.origin===connectOrigin)if(e===ACK_EVENT&&!a.popup)clearInterval(b);else if(e===URL_EVENT)this.openPopupWindow(c.data.url);else if(e===DONE_EVENT)evHandlers.onDone(d),this.destroy();else if(e===CANCEL_EVENT)evHandlers.onCancel(d),this.destroy();else if(e===ERROR_EVENT)evHandlers.onError(d),this.destroy();else if(e===ROUTE_EVENT)evHandlers.onRoute&&evHandlers.onRoute(d);else if(e===USER_EVENT)evHandlers.onUser&&evHandlers.onUser(d);else if(e===CLOSE_POPUP_EVENT){var f;null===(f=popupWindow)||void 0===f||f.close()}},window.addEventListener("message",onMessageFn)},openPopupWindow(a){const b=window.self.outerHeight/2+window.self.screenY-POPUP_HEIGHT/2,c=window.self.outerWidth/2+window.self.screenX-POPUP_WIDTH/2;if(popupWindow=window.open(a,"targetWindow","toolbar=no,location=no,status=no,menubar=no,width=".concat(POPUP_WIDTH,",height=").concat(POPUP_HEIGHT,",top=").concat(b,",left=").concat(c)),popupWindow){popupWindow.focus();const a=setInterval(()=>{var b;null!==(b=popupWindow)&&void 0!==b&&b.closed&&(clearInterval(a),this.postMessage({type:WINDOW_EVENT,closed:!0,blocked:!1}))},1e3)}else this.postMessage({type:WINDOW_EVENT,closed:!0,blocked:!0})},postMessage(a){var b;null===(b=targetWindow)||void 0===b||b.postMessage(a,connectUrl)}};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29ubmVjdC13ZWItc2RrLm1pbi5qcyIsIm5hbWVzIjpbIklGUkFNRV9JRCIsIlNUWUxFU19JRCIsIlBMQVRGT1JNX0lGUkFNRSIsIlBMQVRGT1JNX1BPUFVQIiwiQ09OTkVDVF9TREtfVkVSU0lPTiIsIlBPUFVQX1dJRFRIIiwiUE9QVVBfSEVJR0hUIiwiQ09OTkVDVF9QT1BVUF9XSURUSCIsIkNPTk5FQ1RfUE9QVVBfSEVJR0hUIiwiQUNLX0VWRU5UIiwiQ0FOQ0VMX0VWRU5UIiwiVVJMX0VWRU5UIiwiRE9ORV9FVkVOVCIsIkVSUk9SX0VWRU5UIiwiUElOR19FVkVOVCIsIldJTkRPV19FVkVOVCIsIlJPVVRFX0VWRU5UIiwiVVNFUl9FVkVOVCIsIkNMT1NFX1BPUFVQX0VWRU5UIiwiSUZSQU1FX0lEIiwiUE9QVVBfV0lEVEgiLCJQT1BVUF9IRUlHSFQiLCJDT05ORUNUX1BPUFVQX0hFSUdIVCIsIkNPTk5FQ1RfUE9QVVBfV0lEVEgiLCJBQ0tfRVZFTlQiLCJDQU5DRUxfRVZFTlQiLCJVUkxfRVZFTlQiLCJET05FX0VWRU5UIiwiRVJST1JfRVZFTlQiLCJQSU5HX0VWRU5UIiwiV0lORE9XX0VWRU5UIiwiUk9VVEVfRVZFTlQiLCJVU0VSX0VWRU5UIiwiU1RZTEVTX0lEIiwiQ09OTkVDVF9TREtfVkVSU0lPTiIsIkNMT1NFX1BPUFVQX0VWRU5UIiwiUExBVEZPUk1fUE9QVVAiLCJQTEFURk9STV9JRlJBTUUiLCJldkhhbmRsZXJzIiwib25NZXNzYWdlRm4iLCJjb25uZWN0VXJsIiwiaWZyYW1lIiwibWV0YUVsIiwidGFyZ2V0V2luZG93IiwiY29ubmVjdE9yaWdpbiIsInBvcHVwV2luZG93IiwiZGVmYXVsdEV2ZW50SGFuZGxlcnMiLCJvbkxvYWQiLCJvblVzZXIiLCJvblJvdXRlIiwiQ29ubmVjdCIsImRlc3Ryb3kiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJjbG9zZSIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJsYXVuY2giLCJ1cmwiLCJldmVudEhhbmRsZXJzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsIlVSTCIsIm9yaWdpbiIsInBvcHVwIiwiZGVmYXVsdFBvcHVwT3B0aW9ucyIsInRvb2xiYXIiLCJsb2NhdGlvbiIsInN0YXR1cyIsIm1lbnViYXIiLCJ3aWR0aCIsImhlaWdodCIsInRvcCIsInNlbGYiLCJvdXRlckhlaWdodCIsInNjcmVlblkiLCJsZWZ0Iiwib3V0ZXJXaWR0aCIsInNjcmVlblgiLCJwb3B1cE9wdGlvbnMiLCJvcGVuIiwiY29uY2F0IiwiZm9jdXMiLCJpbml0UG9zdE1lc3NhZ2UiLCJvbkVycm9yIiwicmVhc29uIiwiY29kZSIsIkVycm9yIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiY3JlYXRlRWxlbWVudCIsImlkIiwidHlwZSIsImlubmVySFRNTCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJtZXRhQXJyYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2V0QXR0cmlidXRlIiwiaGVhZCIsInNyYyIsIm92ZXJsYXkiLCJub2RlIiwicGFyZW50RWwiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJib2R5IiwiY29uc29sZSIsIndhcm4iLCJvbmxvYWQiLCJjb250ZW50V2luZG93IiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiZGF0YSIsInNka1ZlcnNpb24iLCJwbGF0Zm9ybSIsInJlZGlyZWN0VXJsIiwicG9zdE1lc3NhZ2UiLCJldmVudCIsInBheWxvYWQiLCJldmVudFR5cGUiLCJjbGVhckludGVydmFsIiwib3BlblBvcHVwV2luZG93Iiwib25Eb25lIiwib25DYW5jZWwiLCJmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImIiLCJjbG9zZWQiLCJibG9ja2VkIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbnN0YW50cy50cyIsIi4uLy4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOT1RFOiBDaGFuZ2luZyB0aGlzIHZhbHVlIHNob3VsZCBiZSBjb25zaWRlcmVkIGEgdmVyc2lvbiBicmVha2luZyBjaGFuZ2UhISFcbmV4cG9ydCBjb25zdCBJRlJBTUVfSUQgPSAnY29ubmVjdElmcmFtZSc7XG5leHBvcnQgY29uc3QgU1RZTEVTX0lEID0gJ2Nvbm5lY3RTdHlsZXMnO1xuZXhwb3J0IGNvbnN0IFBMQVRGT1JNX0lGUkFNRSA9ICdpZnJhbWUnO1xuZXhwb3J0IGNvbnN0IFBMQVRGT1JNX1BPUFVQID0gJ3dlYic7XG5leHBvcnQgY29uc3QgQ09OTkVDVF9TREtfVkVSU0lPTiA9ICdQQUNLQUdFX1ZFUlNJT04nO1xuXG4vLyBOT1RFOiBvYXV0aCBwb3B1cCB3aW5kb3cgZGltZW5zaW9uc1xuZXhwb3J0IGNvbnN0IFBPUFVQX1dJRFRIID0gNjAwO1xuZXhwb3J0IGNvbnN0IFBPUFVQX0hFSUdIVCA9IDYwMDtcblxuLy8gTk9URTogY29ubmVjdCBwb3B1cCB3aW5kb3cgZGltZW5zaW9uc1xuZXhwb3J0IGNvbnN0IENPTk5FQ1RfUE9QVVBfV0lEVEggPSA1MjA7XG5leHBvcnQgY29uc3QgQ09OTkVDVF9QT1BVUF9IRUlHSFQgPSA3MjA7XG5cbi8vIE5PVEU6IGF2YWlsYWJsZSBldmVudHNcbmV4cG9ydCBjb25zdCBBQ0tfRVZFTlQgPSAnYWNrJztcbmV4cG9ydCBjb25zdCBDQU5DRUxfRVZFTlQgPSAnY2FuY2VsJztcbmV4cG9ydCBjb25zdCBVUkxfRVZFTlQgPSAndXJsJztcbmV4cG9ydCBjb25zdCBET05FX0VWRU5UID0gJ2RvbmUnO1xuZXhwb3J0IGNvbnN0IEVSUk9SX0VWRU5UID0gJ2Vycm9yJztcbmV4cG9ydCBjb25zdCBQSU5HX0VWRU5UID0gJ3BpbmcnO1xuZXhwb3J0IGNvbnN0IFdJTkRPV19FVkVOVCA9ICd3aW5kb3cnO1xuZXhwb3J0IGNvbnN0IFJPVVRFX0VWRU5UID0gJ3JvdXRlJztcbmV4cG9ydCBjb25zdCBVU0VSX0VWRU5UID0gJ3VzZXInO1xuZXhwb3J0IGNvbnN0IENMT1NFX1BPUFVQX0VWRU5UID0gJ2Nsb3NlUG9wdXAnO1xuIiwiaW1wb3J0IHtcbiAgSUZSQU1FX0lELFxuICBQT1BVUF9XSURUSCxcbiAgUE9QVVBfSEVJR0hULFxuICBDT05ORUNUX1BPUFVQX0hFSUdIVCxcbiAgQ09OTkVDVF9QT1BVUF9XSURUSCxcbiAgQUNLX0VWRU5ULFxuICBDQU5DRUxfRVZFTlQsXG4gIFVSTF9FVkVOVCxcbiAgRE9ORV9FVkVOVCxcbiAgRVJST1JfRVZFTlQsXG4gIFBJTkdfRVZFTlQsXG4gIFdJTkRPV19FVkVOVCxcbiAgUk9VVEVfRVZFTlQsXG4gIFVTRVJfRVZFTlQsXG4gIFNUWUxFU19JRCxcbiAgQ09OTkVDVF9TREtfVkVSU0lPTixcbiAgQ0xPU0VfUE9QVVBfRVZFTlQsXG4gIFBMQVRGT1JNX1BPUFVQLFxuICBQTEFURk9STV9JRlJBTUUsXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxubGV0IGV2SGFuZGxlcnM6IENvbm5lY3RFdmVudEhhbmRsZXJzO1xubGV0IG9uTWVzc2FnZUZuOiBhbnk7XG5sZXQgY29ubmVjdFVybDogc3RyaW5nO1xubGV0IGlmcmFtZTogYW55O1xubGV0IG1ldGFFbDogYW55O1xubGV0IHRhcmdldFdpbmRvdzogV2luZG93O1xubGV0IGNvbm5lY3RPcmlnaW46IHN0cmluZztcbmxldCBwb3B1cFdpbmRvdzogV2luZG93IHwgbnVsbDtcblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0RXZlbnRIYW5kbGVycyB7XG4gIG9uRG9uZTogKGV2ZW50OiBDb25uZWN0RG9uZUV2ZW50KSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKGV2ZW50OiBDb25uZWN0Q2FuY2VsRXZlbnQpID0+IHZvaWQ7XG4gIG9uRXJyb3I6IChldmVudDogQ29ubmVjdEVycm9yRXZlbnQpID0+IHZvaWQ7XG4gIG9uUm91dGU/OiAoZXZlbnQ6IENvbm5lY3RSb3V0ZUV2ZW50KSA9PiB2b2lkO1xuICBvblVzZXI/OiAoZXZlbnQ6IGFueSkgPT4gdm9pZDtcbiAgb25Mb2FkPzogKCkgPT4gdm9pZDtcbn1cblxuY29uc3QgZGVmYXVsdEV2ZW50SGFuZGxlcnM6IGFueSA9IHtcbiAgb25Mb2FkOiAoKSA9PiB7fSxcbiAgb25Vc2VyOiAoZXZlbnQ6IGFueSkgPT4ge30sXG4gIG9uUm91dGU6IChldmVudDogQ29ubmVjdFJvdXRlRXZlbnQpID0+IHt9LFxufTtcblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0UHJvcHMge1xuICBjb25uZWN0VXJsOiBzdHJpbmc7XG4gIGV2ZW50SGFuZGxlcnM6IENvbm5lY3RFdmVudEhhbmRsZXJzO1xuICBsaW5raW5nVXJpPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RDYW5jZWxFdmVudCB7XG4gIGNvZGU6IG51bWJlcjtcbiAgcmVhc29uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdEVycm9yRXZlbnQge1xuICBjb2RlOiBudW1iZXI7XG4gIHJlYXNvbjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3REb25lRXZlbnQge1xuICBjb2RlOiBudW1iZXI7XG4gIHJlYXNvbjogc3RyaW5nO1xuICByZXBvcnREYXRhOiBbXG4gICAge1xuICAgICAgcG9ydGZvbGlvSWQ6IHN0cmluZztcbiAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgIHJlcG9ydElkOiBzdHJpbmc7XG4gICAgfVxuICBdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RSb3V0ZUV2ZW50IHtcbiAgc2NyZWVuOiBzdHJpbmc7XG4gIHBhcmFtczogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RPcHRpb25zIHtcbiAgc2VsZWN0b3I/OiBzdHJpbmc7XG4gIG5vZGU/OiBOb2RlO1xuICBvdmVybGF5Pzogc3RyaW5nO1xuICBwb3B1cD86IGJvb2xlYW47XG4gIHBvcHVwT3B0aW9ucz86IFBvcHVwT3B0aW9ucztcbiAgcmVkaXJlY3RVcmw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9wdXBPcHRpb25zIHtcbiAgd2lkdGg/OiBudW1iZXI7XG4gIGhlaWdodD86IG51bWJlcjtcbiAgdG9wPzogbnVtYmVyO1xuICBsZWZ0PzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgQ29ubmVjdCB7XG4gIGRlc3Ryb3k6ICgpID0+IHZvaWQ7XG4gIGxhdW5jaDogKFxuICAgIHVybDogc3RyaW5nLFxuICAgIGV2ZW50SGFuZGxlcnM6IENvbm5lY3RFdmVudEhhbmRsZXJzLFxuICAgIG9wdGlvbnM/OiBDb25uZWN0T3B0aW9uc1xuICApID0+IFdpbmRvdyB8IG51bGwgfCB2b2lkO1xuICBpbml0UG9zdE1lc3NhZ2U6IChvcHRpb25zOiBDb25uZWN0T3B0aW9ucykgPT4gdm9pZDtcbiAgb3BlblBvcHVwV2luZG93OiAodXJsOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHBvc3RNZXNzYWdlOiAoZXZlbnQ6IGFueSkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IENvbm5lY3Q6IENvbm5lY3QgPSB7XG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUucGFyZW50Tm9kZSkge1xuICAgICAgaWZyYW1lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbiAgICB9XG5cbiAgICBpZiAobWV0YUVsICYmIG1ldGFFbC5wYXJlbnROb2RlKSB7XG4gICAgICBtZXRhRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChtZXRhRWwpO1xuICAgIH1cblxuICAgIGlmICghaWZyYW1lICYmIHRhcmdldFdpbmRvdykge1xuICAgICAgdGFyZ2V0V2luZG93LmNsb3NlKCk7XG4gICAgfVxuXG4gICAgaWZyYW1lID0gdW5kZWZpbmVkO1xuICAgIG1ldGFFbCA9IHVuZGVmaW5lZDtcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlRm4pO1xuICB9LFxuXG4gIGxhdW5jaChcbiAgICB1cmw6IHN0cmluZyxcbiAgICBldmVudEhhbmRsZXJzOiBDb25uZWN0RXZlbnRIYW5kbGVycyxcbiAgICBvcHRpb25zOiBDb25uZWN0T3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGNvbm5lY3RVcmwgPSB1cmw7XG4gICAgZXZIYW5kbGVycyA9IHsgLi4uZGVmYXVsdEV2ZW50SGFuZGxlcnMsIC4uLmV2ZW50SGFuZGxlcnMgfTtcbiAgICBjb25uZWN0T3JpZ2luID0gbmV3IFVSTChjb25uZWN0VXJsKS5vcmlnaW47XG5cbiAgICBpZiAob3B0aW9ucy5wb3B1cCkge1xuICAgICAgY29uc3QgZGVmYXVsdFBvcHVwT3B0aW9ucyA9IHtcbiAgICAgICAgdG9vbGJhcjogJ25vJyxcbiAgICAgICAgbG9jYXRpb246ICdubycsXG4gICAgICAgIHN0YXR1czogJ25vJyxcbiAgICAgICAgbWVudWJhcjogJ25vJyxcbiAgICAgICAgd2lkdGg6IENPTk5FQ1RfUE9QVVBfSEVJR0hULFxuICAgICAgICBoZWlnaHQ6IENPTk5FQ1RfUE9QVVBfV0lEVEgsXG4gICAgICAgIHRvcDpcbiAgICAgICAgICB3aW5kb3cuc2VsZi5vdXRlckhlaWdodCAvIDIgK1xuICAgICAgICAgIHdpbmRvdy5zZWxmLnNjcmVlblkgLVxuICAgICAgICAgIENPTk5FQ1RfUE9QVVBfSEVJR0hUIC8gMixcbiAgICAgICAgbGVmdDpcbiAgICAgICAgICB3aW5kb3cuc2VsZi5vdXRlcldpZHRoIC8gMiArXG4gICAgICAgICAgd2luZG93LnNlbGYuc2NyZWVuWCAtXG4gICAgICAgICAgQ09OTkVDVF9QT1BVUF9XSURUSCAvIDIsXG4gICAgICB9O1xuICAgICAgY29uc3QgcG9wdXBPcHRpb25zID0geyAuLi5kZWZhdWx0UG9wdXBPcHRpb25zLCAuLi5vcHRpb25zLnBvcHVwT3B0aW9ucyB9O1xuICAgICAgY29uc3QgcG9wdXBXaW5kb3cgPSB3aW5kb3cub3BlbihcbiAgICAgICAgY29ubmVjdFVybCxcbiAgICAgICAgJ3RhcmdldFdpbmRvdycsXG4gICAgICAgIGB0b29sYmFyPSR7ZGVmYXVsdFBvcHVwT3B0aW9ucy50b29sYmFyfSxsb2NhdGlvbj0ke2RlZmF1bHRQb3B1cE9wdGlvbnMubG9jYXRpb259LHN0YXR1cz0ke2RlZmF1bHRQb3B1cE9wdGlvbnMuc3RhdHVzfSxtZW51YmFyPSR7ZGVmYXVsdFBvcHVwT3B0aW9ucy5tZW51YmFyfSx3aWR0aD0ke3BvcHVwT3B0aW9ucy53aWR0aH0saGVpZ2h0PSR7cG9wdXBPcHRpb25zLmhlaWdodH0sdG9wPSR7cG9wdXBPcHRpb25zLnRvcH0sbGVmdD0ke3BvcHVwT3B0aW9ucy5sZWZ0fWBcbiAgICAgICk7XG5cbiAgICAgIGlmICghcG9wdXBXaW5kb3cpIHtcbiAgICAgICAgZXZIYW5kbGVycy5vbkVycm9yKHsgcmVhc29uOiAnZXJyb3InLCBjb2RlOiAxNDAzIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0V2luZG93ID0gcG9wdXBXaW5kb3c7XG4gICAgICAgIHBvcHVwV2luZG93LmZvY3VzKCk7XG4gICAgICAgIHRoaXMuaW5pdFBvc3RNZXNzYWdlKG9wdGlvbnMpO1xuICAgICAgICBldkhhbmRsZXJzLm9uTG9hZCAmJiBldkhhbmRsZXJzLm9uTG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcG9wdXBXaW5kb3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpZnJhbWUgJiYgaWZyYW1lLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdZb3UgbXVzdCBkZXN0cm95IHRoZSBpZnJhbWUgYmVmb3JlIHlvdSBjYW4gb3BlbiBhIG5ldyBvbmUuIENhbGwgXCJkZXN0cm95KClcIidcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChTVFlMRVNfSUQpKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGUuaWQgPSBTVFlMRVNfSUQ7XG4gICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSBgIyR7SUZSQU1FX0lEfSB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIGxlZnQ6IDA7XG4gICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICB6LWluZGV4OiAxMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuOCk7XG4gICAgICAgIH1gO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgIH1cblxuICAgICAgbGV0IG1ldGFBcnJheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21ldGFbbmFtZT1cInZpZXdwb3J0XCJdJyk7XG4gICAgICBpZiAobWV0YUFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBtZXRhRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdtZXRhJyk7XG4gICAgICAgIG1ldGFFbC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndmlld3BvcnQnKTtcbiAgICAgICAgbWV0YUVsLnNldEF0dHJpYnV0ZSgnY29udGVudCcsICdpbml0aWFsLXNjYWxlPTEnKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChtZXRhRWwpO1xuICAgICAgfVxuXG4gICAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcblxuICAgICAgaWZyYW1lLnNyYyA9IGNvbm5lY3RVcmw7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdpZCcsIElGUkFNRV9JRCk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicsICcwJyk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzY3JvbGxpbmcnLCAnbm8nKTtcbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnTGF1bmNoaW5nIE1vZGFsJyk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCd0aXRsZScsICdMYXVuY2hpbmcgTW9kYWwnKTtcblxuICAgICAgLy8gTk9URTogdXBkYXRlIG92ZXJsYXlcbiAgICAgIGlmIChvcHRpb25zLm92ZXJsYXkpIHtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgYmFja2dyb3VuZDogJHtvcHRpb25zLm92ZXJsYXl9O2ApO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5ub2RlKSB7XG4gICAgICAgIG9wdGlvbnMubm9kZS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTk9URTogYXR0YWNoIHRvIHNlbGVjdG9yIGlmIHNwZWNpZmllZFxuICAgICAgICBjb25zdCBwYXJlbnRFbCA9ICEhb3B0aW9ucy5zZWxlY3RvclxuICAgICAgICAgID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnNlbGVjdG9yKVxuICAgICAgICAgIDogZG9jdW1lbnQuYm9keTtcbiAgICAgICAgaWYgKHBhcmVudEVsKSB7XG4gICAgICAgICAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgQ291bGRuJ3QgZmluZCBhbnkgZWxlbWVudHMgbWF0Y2hpbmcgXCIke29wdGlvbnMuc2VsZWN0b3J9XCIsIGFwcGVuZGluZyBcImlmcmFtZVwiIHRvIFwiYm9keVwiIGluc3RlYWQuYFxuICAgICAgICAgICk7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmcmFtZS5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIHRhcmdldFdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93O1xuICAgICAgICB0aGlzLmluaXRQb3N0TWVzc2FnZShvcHRpb25zKTtcbiAgICAgICAgZXZIYW5kbGVycy5vbkxvYWQgJiYgZXZIYW5kbGVycy5vbkxvYWQoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSxcblxuICBpbml0UG9zdE1lc3NhZ2Uob3B0aW9uczogQ29ubmVjdE9wdGlvbnMpIHtcbiAgICAvLyBOT1RFOiBwaW5nIGNvbm5lY3QgdW50aWwgaXQgcmVzcG9uZHNcbiAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogUElOR19FVkVOVCxcbiAgICAgICAgc2VsZWN0b3I6IG9wdGlvbnMuc2VsZWN0b3IsXG4gICAgICAgIHNka1ZlcnNpb246IENPTk5FQ1RfU0RLX1ZFUlNJT04sXG4gICAgICAgIHBsYXRmb3JtOiBgJHtvcHRpb25zLnBvcHVwID8gUExBVEZPUk1fUE9QVVAgOiBQTEFURk9STV9JRlJBTUV9YCxcbiAgICAgIH07XG4gICAgICBpZiAob3B0aW9ucy5yZWRpcmVjdFVybCkgZGF0YVsncmVkaXJlY3RVcmwnXSA9IG9wdGlvbnMucmVkaXJlY3RVcmw7XG5cbiAgICAgIHRoaXMucG9zdE1lc3NhZ2UoZGF0YSk7XG4gICAgfSwgMTAwMCk7XG5cbiAgICBvbk1lc3NhZ2VGbiA9IChldmVudDogYW55KSA9PiB7XG4gICAgICBjb25zdCBwYXlsb2FkID0gZXZlbnQuZGF0YS5kYXRhO1xuICAgICAgY29uc3QgZXZlbnRUeXBlID0gZXZlbnQuZGF0YS50eXBlO1xuICAgICAgLy8gTk9URTogbWFrZSBzdXJlIGl0J3MgQ29ubmVjdCBhbmQgbm90IGEgYmFkIGFjdG9yXG4gICAgICBpZiAoZXZlbnQub3JpZ2luID09PSBjb25uZWN0T3JpZ2luKSB7XG4gICAgICAgIC8vIE5PVEU6IGFjdGl2ZWx5IHBpbmdpbmcgY29ubmVjdCB3aGlsZSBpdCdzIGRpc3BsYXllZCBpbiBhIHBvcHVwIGFsbG93cyB1cyB0byByZWNvdmVyIHRoZVxuICAgICAgICAvLyBzZXNzaW9uIGlmIHRoZSB1c2VyIHJlZnJlc2hlcyB0aGUgcG9wdXAgd2luZG93XG4gICAgICAgIGlmIChldmVudFR5cGUgPT09IEFDS19FVkVOVCAmJiAhb3B0aW9ucy5wb3B1cCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBVUkxfRVZFTlQpIHtcbiAgICAgICAgICB0aGlzLm9wZW5Qb3B1cFdpbmRvdyhldmVudC5kYXRhLnVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBET05FX0VWRU5UKSB7XG4gICAgICAgICAgZXZIYW5kbGVycy5vbkRvbmUocGF5bG9hZCk7XG4gICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBDQU5DRUxfRVZFTlQpIHtcbiAgICAgICAgICBldkhhbmRsZXJzLm9uQ2FuY2VsKHBheWxvYWQpO1xuICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSA9PT0gRVJST1JfRVZFTlQpIHtcbiAgICAgICAgICBldkhhbmRsZXJzLm9uRXJyb3IocGF5bG9hZCk7XG4gICAgICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBST1VURV9FVkVOVCkge1xuICAgICAgICAgIGV2SGFuZGxlcnMub25Sb3V0ZSAmJiBldkhhbmRsZXJzLm9uUm91dGUocGF5bG9hZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBVU0VSX0VWRU5UKSB7XG4gICAgICAgICAgZXZIYW5kbGVycy5vblVzZXIgJiYgZXZIYW5kbGVycy5vblVzZXIocGF5bG9hZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBDTE9TRV9QT1BVUF9FVkVOVCkge1xuICAgICAgICAgIHBvcHVwV2luZG93Py5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25NZXNzYWdlRm4pO1xuICB9LFxuXG4gIG9wZW5Qb3B1cFdpbmRvdyh1cmw6IHN0cmluZykge1xuICAgIGNvbnN0IHRvcCA9XG4gICAgICB3aW5kb3cuc2VsZi5vdXRlckhlaWdodCAvIDIgKyB3aW5kb3cuc2VsZi5zY3JlZW5ZIC0gUE9QVVBfSEVJR0hUIC8gMjtcbiAgICBjb25zdCBsZWZ0ID1cbiAgICAgIHdpbmRvdy5zZWxmLm91dGVyV2lkdGggLyAyICsgd2luZG93LnNlbGYuc2NyZWVuWCAtIFBPUFVQX1dJRFRIIC8gMjtcbiAgICBwb3B1cFdpbmRvdyA9IHdpbmRvdy5vcGVuKFxuICAgICAgdXJsLFxuICAgICAgJ3RhcmdldFdpbmRvdycsXG4gICAgICBgdG9vbGJhcj1ubyxsb2NhdGlvbj1ubyxzdGF0dXM9bm8sbWVudWJhcj1ubyx3aWR0aD0ke1BPUFVQX1dJRFRIfSxoZWlnaHQ9JHtQT1BVUF9IRUlHSFR9LHRvcD0ke3RvcH0sbGVmdD0ke2xlZnR9YFxuICAgICk7XG5cbiAgICBpZiAocG9wdXBXaW5kb3cpIHtcbiAgICAgIHBvcHVwV2luZG93LmZvY3VzKCk7XG4gICAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAvLyBjbGVhciBpdHNlbGYgaWYgd2luZG93IG5vIGxvbmdlciBleGlzdHMgb3IgaGFzIGJlZW4gY2xvc2VkXG4gICAgICAgIGlmIChwb3B1cFdpbmRvdz8uY2xvc2VkKSB7XG4gICAgICAgICAgLy8gd2luZG93IGNsb3NlZCwgbm90aWZ5IGNvbm5lY3RcbiAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogV0lORE9XX0VWRU5ULFxuICAgICAgICAgICAgY2xvc2VkOiB0cnVlLFxuICAgICAgICAgICAgYmxvY2tlZDogZmFsc2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogV0lORE9XX0VWRU5ULFxuICAgICAgICBjbG9zZWQ6IHRydWUsXG4gICAgICAgIGJsb2NrZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgcG9zdE1lc3NhZ2UoZGF0YTogYW55KSB7XG4gICAgdGFyZ2V0V2luZG93Py5wb3N0TWVzc2FnZShkYXRhLCBjb25uZWN0VXJsKTtcbiAgfSxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUNBLE1BQU8sTUFBTSxDQUFBQSxTQUFTLENBQUcsZUFBZSxDQUN4QyxNQUFPLE1BQU0sQ0FBQUMsU0FBUyxDQUFHLGVBQWUsQ0FDeEMsTUFBTyxNQUFNLENBQUFDLGVBQWUsQ0FBRyxRQUFRLENBQ3ZDLE1BQU8sTUFBTSxDQUFBQyxjQUFjLENBQUcsS0FBSyxDQUNuQyxNQUFPLE1BQU0sQ0FBQUMsbUJBQW1CLENBQUcsaUJBQWlCLENBR3BELE1BQU8sTUFBTSxDQUFBQyxXQUFXLENBQUcsR0FBRyxDQUM5QixNQUFPLE1BQU0sQ0FBQUMsWUFBWSxDQUFHLEdBQUcsQ0FHL0IsTUFBTyxNQUFNLENBQUFDLG1CQUFtQixDQUFHLEdBQUcsQ0FDdEMsTUFBTyxNQUFNLENBQUFDLG9CQUFvQixDQUFHLEdBQUcsQ0FHdkMsTUFBTyxNQUFNLENBQUFDLFNBQVMsQ0FBRyxLQUFLLENBQzlCLE1BQU8sTUFBTSxDQUFBQyxZQUFZLENBQUcsUUFBUSxDQUNwQyxNQUFPLE1BQU0sQ0FBQUMsU0FBUyxDQUFHLEtBQUssQ0FDOUIsTUFBTyxNQUFNLENBQUFDLFVBQVUsQ0FBRyxNQUFNLENBQ2hDLE1BQU8sTUFBTSxDQUFBQyxXQUFXLENBQUcsT0FBTyxDQUNsQyxNQUFPLE1BQU0sQ0FBQUMsVUFBVSxDQUFHLE1BQU0sQ0FDaEMsTUFBTyxN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
"use strict";(()=>{var M=Object.defineProperty;var P=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var m=(t,r,e)=>r in t?M(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,d=(t,r)=>{for(var e in r||(r={}))D.call(r,e)&&m(t,e,r[e]);if(P)for(var e of P(r))S.call(r,e)&&m(t,e,r[e]);return t};var u="connectIframe",f="connectStyles",v="iframe",N="web",h="PACKAGE_VERSION";var O="ack",_="cancel",w="url",T="done",y="error",b="ping",g="window",I="route",R="user",x="closePopup";var i,C,p,o,a,c,V,l,W={onLoad:()=>{},onUser:t=>{},onRoute:t=>{}},G={destroy(){o&&o.parentNode&&o.parentNode.removeChild(o),a&&a.parentNode&&a.parentNode.removeChild(a),!o&&c&&c.close(),o=void 0,a=void 0,window.removeEventListener("message",C)},launch(t,r,e={}){if(p=t,i=d(d({},W),r),V=new URL(p).origin,e.popup){let s={toolbar:"no",location:"no",status:"no",menubar:"no",width:720,height:520,top:window.self.outerHeight/2+window.self.screenY-720/2,left:window.self.outerWidth/2+window.self.screenX-520/2},n=d(d({},s),e.popupOptions),E=window.open(p,"targetWindow",`toolbar=${s.toolbar},location=${s.location},status=${s.status},menubar=${s.menubar},width=${n.width},height=${n.height},top=${n.top},left=${n.left}`);return E?(c=E,E.focus(),this.initPostMessage(e),i.onLoad&&i.onLoad()):i.onError({reason:"error",code:1403}),E}else{if(o&&o.parentNode)throw new Error('You must destroy the iframe before you can open a new one. Call "destroy()"');if(!document.getElementById(f)){let n=document.createElement("style");n.id=f,n.type="text/css",n.innerHTML=`#${u} {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          z-index: 10;
          background: rgba(0,0,0,0.8);
        }`,document.getElementsByTagName("head")[0].appendChild(n)}if(document.querySelectorAll('meta[name="viewport"]').length===0&&(a=document.createElement("meta"),a.setAttribute("name","viewport"),a.setAttribute("content","initial-scale=1"),document.head.appendChild(a)),o=document.createElement("iframe"),o.src=p,o.setAttribute("id",u),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("aria-label","Launching Modal"),o.setAttribute("title","Launching Modal"),e.overlay&&o.setAttribute("style",`background: ${e.overlay};`),e.node)e.node.appendChild(o);else{let n=e.selector?document.querySelector(e.selector):document.body;n?n.appendChild(o):(console.warn(`Couldn't find any elements matching "${e.selector}", appending "iframe" to "body" instead.`),document.body.appendChild(o))}return o.onload=()=>{c=o.contentWindow,this.initPostMessage(e),i.onLoad&&i.onLoad()},null}},initPostMessage(t){let r=setInterval(()=>{let e={type:b,selector:t.selector,sdkVersion:h,platform:`${t.popup?N:v}`};t.redirectUrl&&(e.redirectUrl=t.redirectUrl),this.postMessage(e)},1e3);C=e=>{let s=e.data.data,n=e.data.type;e.origin===V&&(n===O&&!t.popup?clearInterval(r):n===w?this.openPopupWindow(e.data.url):n===T?(i.onDone(s),this.destroy()):n===_?(i.onCancel(s),this.destroy()):n===y?(i.onError(s),this.destroy()):n===I?i.onRoute&&i.onRoute(s):n===R?i.onUser&&i.onUser(s):n===x&&(l==null||l.close()))},window.addEventListener("message",C)},openPopupWindow(t){let r=window.self.outerHeight/2+window.self.screenY-600/2,e=window.self.outerWidth/2+window.self.screenX-600/2;if(l=window.open(t,"targetWindow",`toolbar=no,location=no,status=no,menubar=no,width=${600},height=${600},top=${r},left=${e}`),l){l.focus();let s=setInterval(()=>{l!=null&&l.closed&&(clearInterval(s),this.postMessage({type:g,closed:!0,blocked:!1}))},1e3)}else this.postMessage({type:g,closed:!0,blocked:!0})},postMessage(t){c==null||c.postMessage(t,p)}};})();
//# sourceMappingURL=index.min.js.map
